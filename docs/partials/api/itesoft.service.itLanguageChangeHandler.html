<h1><code ng:non-bindable="">itLanguageChangeHandler</code>
<div><span class="hint">service in module <code ng:non-bindable="">itesoft</code>
<code ng:non-bindable=""><a target="_blank" href="https://github.com/alizarion/angular-common/releases/tag/v1.1"> since v1.1</a></code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="itesoft-service-page itesoft-service-itlanguagechangehandler-page"><p>itLanguageChangeHandlerProvider modifies the current language to a new language. Features:
<br/>1) Asks confirmation (optional) before changing the language;
<br/>2) Stores the new culture setting either in the browser&#39;s local storage [&quot;local&quot;] (default),  or as a query string parameter [&quot;query&quot;]
<br/>3) Allows the consuming service to receive returned results by a callback method.
<br/></p>
<table class="table">
 <tr>
  <td><code>itLanguageChangeHandler.changeLanguage(lang, [scope, callback])</code></td>
  <td>Method to change the current language.
   <br/>lang (required). The new language culture, e.g. &quot;en_GB&quot;.
   <br/>scope (optional). The current scope.
   <br/>callback (optional). The callback function.
  </td>
 </tr>
 <tr>
  <td><code>itLanguageChangeHandler.getConfig()</code></td>
  <td>Method to get the current configuration options.
  <br />storage: local (default value) for localStorage or query for url query parameter
  <br />displayConfirm: Whether or not to display a confirmation popup. True by default.
  <br />onChangePopup:
  <br />title: title of popup confirmation
  <br />text: text of popup confirmation
  </td>
 </tr>
 <tr>
  <td><code>itLanguageChangeHandler.getCurrentLanguage()</code></td>
  <td>Method to get the current language.</td>
 </tr>
 <tr>
  <td><code>itLanguageChangeHandler.getDefaultLocale(lang)</code></td>
  <td>Method to get the default locale from an optional language code.
   <br/>lang (optional). The language code, e.g. &quot;en&quot;.
  </td>
 </tr>
 <tr>
  <td><code>itLanguageChangeHandler.getLanguageCode(locale)</code></td>
  <td>Method to get the language code from an optional locale.
   <br/>locale (optional). The locale, e.g. &quot;en_GB&quot;.
  </td>
 </tr>
</table>
</div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="#/api/localStorageService">localStorageService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/itPopup">itPopup</a></code>
</li>
</ul>
<h2 id="example">Example</h2>
<div class="example"><div class="itesoft-service-page itesoft-service-itlanguagechangehandler-page"><h4 id="example_source">Source</h4>
<div source-edit="itesoft" source-edit-deps="angular.js Controller.js" source-edit-html="index.html-20" source-edit-css="" source-edit-js="Controller.js" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="index.html">
<pre class="prettyprint linenums" ng-set-text="index.html-20" ng-html-wrap-loaded="itesoft angular.js Controller.js"></pre>
<script type="text/ng-template" id="index.html-20">
<div ng-controller="MainController">
   <br /> Set language: <input type="text" ng-model="locale" /> 
   <button class="btn btn-warning" ng-click="changeLanguage()">change language</button>

   <br /> Storage type: {{itLanguageChangeHandler.getConfig().storage}}
   <br /> Initial language: {{initialLanguage}}
   <br /> Updated current language: {{currentLanguage}}
</div>
</script>
</div>
<div class="tab-pane" title="Controller.js">
<pre class="prettyprint linenums" ng-set-text="Controller.js"></pre>
<script type="text/ng-template" id="Controller.js">
   angular.module('itesoft')
       .config(['itLanguageChangeHandlerProvider','localStorageServiceProvider', function (itLanguageChangeHandlerProvider, localStorageServiceProvider) {
                   // example for storage option configuration value
                   itLanguageChangeHandlerProvider.options.storage = "local";
                    
                   localStorageServiceProvider.setPrefix('itesoft');

               }])
       .controller('MainController',['$translate', '$scope','itLanguageChangeHandler', function($translate, $scope,itLanguageChangeHandler) {
           $translate.use('fr_FR');
           $scope.initialLanguage = itLanguageChangeHandler.getCurrentLanguage();

           // new language setting returned by a callback function.
           var languageChanged = function(data){
             $scope.currentLanguage = data.currentLanguage;
           };
       
           $scope.changeLanguage = function(){
             if($scope.locale) {
               
               // new language setting returned by a promise.
               itLanguageChangeHandler.changeLanguage($scope.locale, languageChanged);
             }
           }
       }]);
</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="itesoft" ng-set-html="index.html-20" ng-eval-javascript="Controller.js"></div>
</div></div>
</div>
